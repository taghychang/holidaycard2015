function processHandler(e,a){return!0}function scoreHandler(e){0===e.frame||1===e.frame?(score-=1,console.log("--"+score)):(score+=1,cupGeneratorSpeed+=.2,console.log("--"+score)),scoreGauge.frame=score/2,console.log("time on table(speed) ="+cup_speed),score>=20?0==player_condition.isWin&&(winAudioFX(),player_condition.isWin=!0,game.animateSteam.play("steam"),game.animateSteam.events.onAnimationComplete.addOnce(function(){fadeOut("EndGameWin")}),barista.animations.stop(null,!0),game.cupGenerator.timer.stop(),noiseLoop.stop()):0>=score&&0==player_condition.isLose&&(loseAudioFX(),player_condition.isLose=!0,game.animateFreeze.play("freeze"),game.animateFreeze.events.onAnimationComplete.addOnce(function(){fadeOut("EndGameLose")}),barista.animations.stop(null,!0),game.cupGenerator.timer.stop(),noiseLoop.stop())}function collisionHandler(e,a){0===a.frame||1===a.frame?(a.kill(),powerDownParticles(),powerDownAudioFX(),console.log("ice")):(a.kill(),powerUpParticles(),powerUpAudioFX(),console.log("HOT")),scoreHandler(a)}function moveOver(){var e=game.width/2;game.input.worldX<=e?movePlayer.left():game.input.worldX>=e&&movePlayer.right()}function beginSwipe(){function e(){endX=game.input.worldX;var o=a-endX;Math.abs(o)>10&&(o>0?movePlayer.left():movePlayer.right()),game.input.onDown.add(beginSwipe),game.input.onUp.remove(e)}var a;a=game.input.worldX,game.input.onDown.remove(beginSwipe),game.input.onUp.add(e)}var player,playerPosition,playerPositions,playerSpeed,cupSpeed,cursor,cupGeneratorSpeed,blackbox,player_condition={isWin:!1,isLose:!1},CupGroup,shop,endX,startX,tweenL,tweenR,tween_position,tween_size,cup_speed,stageFreeze,score,powerDown,powerUp,snowflakes_frames=7,snowflakeArray=Array.apply(null,{length:snowflakes_frames}).map(Number.call,Number),powerUpAudio,powerDownAudio,shopLoop,playGame=function(e){},movePlayer={left:function(){playerPosition>0?(tweenL=game.add.tween(player).to({x:playerPositions[playerPosition-1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("left",!1),playerPosition--,console.log("lane: "+playerPosition)):player.animations.play("halfLeft",!1)},right:function(){2>playerPosition?(tweenR=game.add.tween(player).to({x:playerPositions[playerPosition+1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("right",!1),playerPosition++,console.log("lane: "+playerPosition)):player.animations.play("halfRight",!1)}};playGame.prototype={preload:function(){},create:function(){noiseLoop=game.add.audio("noiseLoop"),noiseLoop.loop=!0,noiseLoop.volume=.8,noiseLoop.allowMultiple=!1,noiseLoop.play();var e=game.add.image(0,0,"shopMobile");shopLoop.fadeTo(2e3,.7),cupGeneratorSpeed=.65,playerSpeed=112,cupSpeed=750,score=4,scoreGauge=game.add.sprite(game.width-80,27,"scoreGauge"),scoreGauge.frame=score-1,stageFreeze=game.add.sprite(0,0,"stageFreeze"),stageFreeze=game.add.sprite(0,0,"stageSteam"),powerDown=game.add.emitter(game.world.centerX,200,200),powerDown.makeParticles("snowflakes",snowflakeArray),powerUp=game.add.emitter(game.world.centerX,200,200),powerUp.makeParticles("steam",[snowflakeArray]),barista=game.add.sprite(20,6,"barista"),barista.animations.add("youGotServed",[0,1,2,3,4,5,6,7,8],16,!0);var a=game.width/2-200,o=game.width/2,n=game.width/2+200,t=[a,o,n];playerPosition=1,playerPositions=[t[0],t[1],t[2]],player=game.add.sprite(playerPositions[playerPosition],game.height-110,"player"),player.anchor.set(.5),game.physics.arcade.enable(player),game.physics.arcade.enable(powerDown),player.animations.add("left",[0,1,2,3,4],10,!1),player.animations.add("right",[5,6,7,8,4],10,!1),player.animations.add("halfLeft",[0,4],10,!1),player.animations.add("halfRight",[5,4],10,!1),cursor=game.input.keyboard.createCursorKeys(),game.input.onDown.add(beginSwipe,this),cursor.left.onDown.add(movePlayer.left),cursor.right.onDown.add(movePlayer.right),this.cups=this.game.add.group(),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.setSize(10,10,0,-50);var i=game.add.group();i.add(player),game.world.bringToTop(i),game.animateFreeze=game.add.sprite(0,0,"stageFreeze"),game.animateFreeze.animations.add("freeze",[0,1,2,3,4,5,6],5,!1),game.animateFreeze.frame=0,game.animateSteam=game.add.sprite(0,0,"stageSteam"),game.animateSteam.animations.add("steam",[0,1,2,3,4,5,6],4.5,!1),game.animateSteam.frame=0,player_condition.isWin=!1,player_condition.isLose=!1;var r=game.world.width,s=game.world.height,p=game.add.bitmapData(r,s);p.ctx.beginPath(),p.ctx.rect(0,0,r,s),p.ctx.fillStyle="#000000",p.ctx.fill(),game.blackbox=game.add.sprite(game.world.centerX,game.world.centerY,p),game.blackbox.anchor.setTo(.5,.5),blackbox_out=game.add.tween(game.blackbox).to({alpha:0},500,"Linear",!0),game.countDown=game.add.sprite(0,0,"countDown"),game.countDown.animations.add("countDown"),game.countDown.frame=-1,game.countDown.play("countDown",1),game.countDown.animations.currentAnim.onComplete.add(function(){console.log("animation complete"),game.add.tween(game.countDown).to({alpha:0},0,"Linear",!0),game.cupGenerator=this.game.time.events.loop(Phaser.Timer.SECOND*cupGeneratorSpeed,this.generateCups,this),game.cupGenerator.timer.start(),barista.animations.play("youGotServed",!0)},this)},update:function(){this.cups.forEach(function(e){this.game.physics.arcade.overlap(player,e,collisionHandler,processHandler,this)},this)},generateCups:function(){function e(){tween_position=game.add.tween(d),tween_position.to({y:1250},500,"Linear",!0,0),tween_position.start()}cupMoveAudioFX();var a=782,o=395,n=game.rnd.between(100,110),t=game.rnd.between(280,300),i=game.rnd.between(472,500),r=game.rnd.between(240,250),s=game.rnd.between(290,300),p=game.rnd.between(380,390),l=[r,s,p],m=[n,t,i],d=this.cups.getFirstExists(!1);d||(d=new CupGroup(this.game,this.cups)),d.reset(l[game.rnd.integerInRange(0,2)],o),console.log(d.x),tween_size=game.add.tween(d.scale),tween_size.to({x:.7,y:.7},cupSpeed,"Linear",!0,0),tween_position=game.add.tween(d),d.x===l[0]?tween_position.to({x:m[0],y:a},cupSpeed,"Linear",!0,0):d.x===l[1]?tween_position.to({x:m[1],y:a},cupSpeed,"Linear",!0,0):tween_position.to({x:m[2],y:a},cupSpeed,"Linear",!0,0),tween_position.onComplete.addOnce(e),d.sort("y",Phaser.Group.SORT_ASCENDING),layerSort()}};