function processHandler(e,a){return!0}function scoreHandler(e){0===e.frame,score-=2,cupGeneratorSpeed-=.4,console.log(score),console.log("cupG ="+cupGeneratorSpeed),scoreGauge.frame=score,(score>=10||0>=score)&&(game.state.start("EndGame"),console.log("GAME OVER .. MOVE ON"))}function collisionHandler(e,a){0===a.frame||1===a.frame?(a.kill(),console.log("hot")):(a.kill(),console.log("ice")),scoreHandler(a)}function moveOver(){var e=game.width/2;game.input.worldX<=e?movePlayer.left():game.input.worldX>=e&&movePlayer.right()}function beginSwipe(){function e(){endX=game.input.worldX;var o=a-endX;Math.abs(o)>10&&(o>0?movePlayer.left():movePlayer.right()),game.input.onDown.add(beginSwipe),game.input.onUp.remove(e)}var a;a=game.input.worldX,game.input.onDown.remove(beginSwipe),game.input.onUp.add(e)}var player,playerPosition,playerPositions,playerSpeed,cupSpeed,cursor,cupGeneratorSpeed,CupGroup,shop,endX,startX,tweenL,tweenR,tween_position,tween_size,cup_speed,stageFreeze,score,shopLoop,playGame=function(e){},movePlayer={left:function(){playerPosition>0?(tweenL=game.add.tween(player).to({x:playerPositions[playerPosition-1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("left",!1),playerPosition--,console.log("lane: "+playerPosition)):player.animations.play("halfLeft",!1)},right:function(){2>playerPosition?(tweenR=game.add.tween(player).to({x:playerPositions[playerPosition+1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("right",!1),playerPosition++,console.log("lane: "+playerPosition)):player.animations.play("halfRight",!1)}};playGame.prototype={preload:function(){game.load.image("shop","images/shop.jpg"),game.load.image("table","images/table.png"),game.load.atlas("cup","images/cups/cups.png","images/cups/cups.json"),game.load.spritesheet("player","images/playerSprite.png",130,238),game.load.atlas("stageFreeze","images/stageFreeze/stageFreeze.png","images/stageFreeze/stageFreeze.json"),game.load.atlas("scoreGauge","images/scoreGauge/scoreGauge.png","images/scoreGauge/scoreGauge.json")},create:function(){game.physics.startSystem(Phaser.Physics.ARCADE),cupGeneratorSpeed=.5,playerSpeed=200,cupSpeed=1e3,score=5,scoreGauge=game.add.sprite(game.width-180,0,"scoreGauge"),scoreGauge.frame=score;var e=game.width/2-200,a=game.width/2,o=game.width/2+200,n=[e,a,o];playerPosition=1,playerPositions=[n[0],n[1],n[2]],player=game.add.sprite(playerPositions[playerPosition],game.height-110,"player"),player.anchor.set(.5),game.physics.arcade.enable(player),player.animations.add("left",[0,1,2,3,4],10,!1),player.animations.add("right",[5,6,7,8,4],10,!1),player.animations.add("halfLeft",[0,4],10,!1),player.animations.add("halfRight",[5,4],10,!1),cursor=game.input.keyboard.createCursorKeys(),game.input.onDown.add(beginSwipe,this),cursor.left.onDown.add(movePlayer.left),cursor.right.onDown.add(movePlayer.right),this.cups=this.game.add.group(),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.setSize(10,10,0,-20),game.physics.enable(player,Phaser.Physics.ARCADE);var r=game.add.group();r.add(player),this.cupGenerator=this.game.time.events.loop(Phaser.Timer.SECOND*cupGeneratorSpeed,this.generateCups,this),this.cupGenerator.timer.start()},update:function(){this.cups.forEach(function(e){this.game.physics.arcade.overlap(player,e,collisionHandler,processHandler,this)},this)},generateCups:function(){function e(){tween_position=game.add.tween(d),tween_position.to({y:1250},500,"Linear",!0,0),tween_position.start()}var a=782,o=395,n=game.rnd.between(100,110),r=game.rnd.between(280,300),t=game.rnd.between(472,500),i=game.rnd.between(240,250),s=game.rnd.between(290,300),p=game.rnd.between(380,390),l=[i,s,p],g=[n,r,t],d=this.cups.getFirstExists(!1);d||(d=new CupGroup(this.game,this.cups)),d.reset(l[game.rnd.integerInRange(0,2)],o),console.log(d.x),tween_size=game.add.tween(d.scale),tween_size.to({x:.7,y:.7},cupSpeed,"Linear",!0,0),tween_position=game.add.tween(d),d.x===l[0]?tween_position.to({x:g[0],y:a},cupSpeed,"Linear",!0,0):d.x===l[1]?tween_position.to({x:g[1],y:a},cupSpeed,"Linear",!0,0):tween_position.to({x:g[2],y:a},cupSpeed,"Linear",!0,0),tween_position.onComplete.addOnce(e),d.sort("y",Phaser.Group.SORT_ASCENDING)},render:function(){game.debug.body(player)}};