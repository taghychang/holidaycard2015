function processHandler(e,a){return!0}function scoreHandler(e){0===e.frame?(score+=2,cupGeneratorSpeed-=.4,console.log(score),console.log("cupG ="+cupGeneratorSpeed)):1===e.frame?score+=1:2===e.frame?(score-=2,cupGeneratorSpeed+=.2,console.log("--"+score)):(score-=1,cupGeneratorSpeed+=.2,console.log("--"+score)),stageFreeze.frame=score,console.log("time on table(speed) ="+cup_speed),(score>=10||0===score)&&(game.state.start("EndGame"),console.log("GAME OVER .. MOVE ON"))}function collisionHandler(e,a){0===a.frame||1===a.frame?(a.kill(),console.log("hot")):(a.kill(),console.log("ice")),scoreHandler(a)}function moveOver(){var e=game.width/2;game.input.worldX<=e?movePlayer.left():game.input.worldX>=e&&movePlayer.right()}function beginSwipe(){function e(){endX=game.input.worldX;var o=a-endX;Math.abs(o)>10&&(o>0?movePlayer.left():movePlayer.right()),game.input.onDown.add(beginSwipe),game.input.onUp.remove(e)}var a;a=game.input.worldX,game.input.onDown.remove(beginSwipe),game.input.onUp.add(e)}var player,playerPosition,playerPositions,playerSpeed,cupSpeed,cursor,cupGeneratorSpeed,CupGroup,shop,endX,startX,tweenL,tweenR,tween_position,tween_size,cup_speed,stageFreeze,score,playGame=function(e){},movePlayer={left:function(){playerPosition>0?(tweenL=game.add.tween(player).to({x:playerPositions[playerPosition-1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("left",!1),playerPosition--,console.log("lane: "+playerPosition)):player.animations.play("halfLeft",!1)},right:function(){2>playerPosition?(tweenR=game.add.tween(player).to({x:playerPositions[playerPosition+1]},playerSpeed,Phaser.Easing.Linear.None,!0),player.animations.play("right",!1),playerPosition++,console.log("lane: "+playerPosition)):player.animations.play("halfRight",!1)}};playGame.prototype={preload:function(){game.load.image("shop","images/shop.jpg"),game.load.image("table","images/table.png"),game.load.atlasXML("cup","images/cups/sprites.png","images/cups/sprites.xml"),game.load.spritesheet("player","images/playerSprite.png",325,347),game.load.atlas("stageFreeze","images/stageFreeze/stageFreeze.png","images/stageFreeze/stageFreeze.json")},create:function(){game.physics.startSystem(Phaser.Physics.ARCADE),game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.minWidth=320,game.scale.minHeight=480,game.scale.maxWidth=1080,game.scale.maxHeight=1639,game.scale.refresh(),cupGeneratorSpeed=.5,playerSpeed=200,cupSpeed=1e3,shop=game.add.sprite(0,0,"shop"),shop.anchor.set(0),score=5,stageFreeze=game.add.sprite(0,0,"stageFreeze"),stageFreeze.frame=score;var e=game.width/2-260,a=game.width/2,o=game.width/2+260,r=[e,a,o];playerPosition=1,playerPositions=[r[0],r[1],r[2]],player=game.add.sprite(playerPositions[playerPosition],game.height-160,"player"),player.anchor.set(.5),game.physics.arcade.enable(player),player.animations.add("left",[0,1,2,3,4],10,!1),player.animations.add("right",[5,6,7,8,4],10,!1),player.animations.add("halfLeft",[0,4],10,!1),player.animations.add("halfRight",[5,4],10,!1),cursor=game.input.keyboard.createCursorKeys(),game.input.onDown.add(beginSwipe,this),cursor.left.onDown.add(movePlayer.left),cursor.right.onDown.add(movePlayer.right),this.cups=this.game.add.group(),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.setSize(10,10,0,30),game.physics.enable(player,Phaser.Physics.ARCADE);var t=game.add.group(),n=game.add.group();t.add(player),n.add(stageFreeze),game.world.bringToTop(n),this.cupGenerator=this.game.time.events.loop(Phaser.Timer.SECOND*cupGeneratorSpeed,this.generateCups,this),this.cupGenerator.timer.start()},update:function(){this.cups.forEach(function(e){this.game.physics.arcade.overlap(player,e,collisionHandler,processHandler,this)},this)},generateCups:function(){function e(){tween_position=game.add.tween(d),tween_position.to({y:1200},500,"Linear",!0,0),tween_position.start()}var a=782,o=395,r=game.rnd.between(0,108),t=game.rnd.between(240,360),n=game.rnd.between(472,580),s=game.rnd.between(240,265),i=game.rnd.between(290,285),p=game.rnd.between(345,370),l=[s,i,p],g=[r,t,n],d=this.cups.getFirstExists(!1);d||(d=new CupGroup(this.game,this.cups)),d.reset(l[game.rnd.integerInRange(0,2)],o),console.log(d.x),tween_size=game.add.tween(d.scale),tween_size.to({x:.5,y:.5},cupSpeed,"Linear",!0,0),tween_position=game.add.tween(d),d.x===l[0]?tween_position.to({x:g[0],y:a},cupSpeed,"Linear",!0,0):d.x===l[1]?tween_position.to({x:g[1],y:a},cupSpeed,"Linear",!0,0):tween_position.to({x:g[2],y:a},cupSpeed,"Linear",!0,0),tween_position.onComplete.addOnce(e),d.sort("y",Phaser.Group.SORT_ASCENDING)},render:function(){game.debug.body(player)}};